До - загрузка документов, на выход был мутабельный объект с различным набором полей.

После - на выходе иммутабельная иерархия объектов со своим набором полей.
Обработку - можно сделать паттерн матчингом, по типу.