До - в метаданных онбординга хранится общий объект матча пользователя, который может находится в 3 разных состояниях.
(нет персон, есть несколько матчей, есть конкретный матч) 

После - создаем систему из 3 типов, каждый описывает конкретный кейс матчинга и используем нужный по месту назначения.

По хорошему надо вынести отдельно работу с матчами и создание из метаданных, конкретный тип матча просто может передаваться как переменная в камунду
и она будет явно приводится к конкретному типу, описанному в After - ExactLegalRepMatch.




