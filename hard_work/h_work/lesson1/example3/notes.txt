До функция подсчета риска
ЦС-4

После

Каждая ветка условия вынесена в обработку отдельной функцией.
Конечно хотелось сделать более умную версию с ad hoc полиморфизмом, но я пока не могу додуматься, когда подсунуть конкретный тип и создавать фабрикой,
компилятор не поймет если ему подсунуть базовый класс к сожалению.



Итого
ЦС до - 4
ЦС после - 1

использованы приемы 
- избавились от if
- adhoc полиморфизм


